{% extends 'front/main.html' %}
{% load static %}
{% block content %}
<script src="https://js.stripe.com/v3/"></script>

<main class="nk-pages">
    <section class="section section-bottom-0 has-shape has-mask">
        <div class="nk-shape bg-shape-blur-m mt-8 start-50 top-0 translate-middle-x"></div>
        <div class="nk-mask bg-pattern-dot bg-blend-around mt-n5 mb-10p mh-50vh"></div>
        <div class="container">
            <div class="section-head">
                <div class="row justify-content-center text-center">
                    <div class="col-lg-10 col-xl-9 col-xxl-8">
                        <h6 class="overline-title text-primary">Plans &amp; Pricing</h6>
                        <h2 class="title h1">Plans that best suit your business requirements</h2>
                    </div>
                </div>
            </div><!-- .section-head -->
            <div class="section-content">
                <div class="row g-gs justify-content-center">
                    <div class="col-lg-4 col-md-6">
                        <div class="pricing">
                            <div class="pricing-body p-5">
                                <div class="text-center">
                                    <h5 class="mb-3">Monthly</h5>
                                    <h3 class="h2 mb-4">$9.95 <span class="caption-text text-muted"> / month</span></h3>
                                    <a href="#" class="btn btn-primary btn-soft btn-block" id="choose-monthly">Choose Monthly Plan</a>
                                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="display: none;"
                                            id="monthly-spinner"></span>

                                </div>
                                <ul class="list gy-3 pt-4 ps-2">
                                    <li><em class="icon ni ni-check text-success"></em> <span><strong>1 million</strong>
                                            Monthly Word Limit</span></li>
                                   
                                    <li><em class="icon ni ni-check text-success"></em> <span>30+ Languages</span></li>
                                    <li><em class="icon ni ni-check text-success"></em> <span>Advance Editor Tool</span>
                                    </li>
                                    <li><em class="icon ni ni-check text-success"></em> <span>Regular Technical
                                            Support</span></li>
                                    <li><em class="icon ni ni-check text-success"></em> <span>Unlimited Logins</span>
                                    </li>
                                    <li><em class="icon ni ni-check text-success"></em> <span>Newest Features</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div><!-- .col -->
                    <div class="col-lg-4 col-md-6">
                        <div class="pricing pricing-featured bg-primary">
                            <div class="pricing-body p-5">
                                <div class="text-center">
                                    <h5 class="mb-3">Yearly</h5>
                                    <h3 class="h2 mb-4">$59.95 <span class="caption-text text-muted"> / year</span></h3>
                                    <a href="#" class="btn btn-primary btn-block" id="choose-yearly">Choose Yearly Plan</a>
                                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="display: none;"
                                            id="yearly-spinner"></span>

                                </div>
                                <ul class="list gy-3 pt-4 ps-2">
                                    <li><em class="icon ni ni-check text-success"></em> <span><strong>10 million</strong>
                                            Yearly Word Limit</span></li>
                                  
                                    <li><em class="icon ni ni-check text-success"></em> <span>50+ Languages</span></li>
                                    <li><em class="icon ni ni-check text-success"></em> <span>Advance Editor Tool</span>
                                    </li>
                                    <li><em class="icon ni ni-check text-success"></em> <span>Regular Technical
                                            Support</span></li>
                                    <li><em class="icon ni ni-check text-success"></em> <span>Unlimited Logins</span>
                                    </li>
                                    <li><em class="icon ni ni-check text-success"></em> <span>Newest Features</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div><!-- .col -->
                   <!-- .col -->
                </div><!-- .row -->
            </div><!-- .section-content -->
        </div><!-- .container -->
    </section><!-- .section -->
    <section class="section section-bottom-0">
        <div class="container">
            <div class="section-head">
                <div class="row justify-content-center text-center">
                    <div class="col-xl-8">
                        <h6 class="overline-title text-primary">FAQ'S</h6>
                        <h2 class="title">Frequently Asked Questions</h2>
                    </div>
                </div>
            </div><!-- .section-head -->
            <div class="section-content">
                <div class="row g-gs justify-content-center">
                    <div class="col-xl-9 col-xxl-8">
                        <div class="accordion accordion-flush accordion-plus-minus accordion-icon-accent" id="faq-1">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button" data-bs-toggle="collapse"
                                        data-bs-target="#faq-1-1"> What is a copy? </button>
                                </h2>
                                <div id="faq-1-1" class="accordion-collapse collapse show" data-bs-parent="#faq-1">
                                    <div class="accordion-body"> Yes, you can write long articel for your blog posts,
                                        product descriptions or any long article with CopyGen. We're always updating our
                                        template and tools, so let us know what are expecting! </div>
                                </div>
                            </div><!-- .accordion-item -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" data-bs-toggle="collapse"
                                        data-bs-target="#faq-1-2"> Does CopyGen to write long articles? </button>
                                </h2>
                                <div id="faq-1-2" class="accordion-collapse collapse" data-bs-parent="#faq-1">
                                    <div class="accordion-body"> Yes, you can write long articel for your blog posts,
                                        product descriptions or any long article with CopyGen. We're always updating our
                                        template and tools, so let us know what are expecting! </div>
                                </div>
                            </div><!-- .accordion-item -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" data-bs-toggle="collapse"
                                        data-bs-target="#faq-1-3"> Is the generated content original? </button>
                                </h2>
                                <div id="faq-1-3" class="accordion-collapse collapse" data-bs-parent="#faq-1">
                                    <div class="accordion-body"> Yes, you can write long articel for your blog posts,
                                        product descriptions or any long article with CopyGen. We're always updating our
                                        template and tools, so let us know what are expecting! </div>
                                </div>
                            </div><!-- .accordion-item -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" data-bs-toggle="collapse"
                                        data-bs-target="#faq-1-4"> Do you have wordpress plugin? </button>
                                </h2>
                                <div id="faq-1-4" class="accordion-collapse collapse" data-bs-parent="#faq-1">
                                    <div class="accordion-body"> Yes, you can write long articel for your blog posts,
                                        product descriptions or any long article with CopyGen. We're always updating our
                                        template and tools, so let us know what are expecting! </div>
                                </div>
                            </div><!-- .accordion-item -->
                        </div><!-- .accordion -->
                    </div><!-- .col -->
                </div><!-- .row -->
            </div><!-- .section-content -->
        </div><!-- .container -->
    </section><!-- .section -->
    {% csrf_token %}
    <section class="section section-bottom-0">
        <div class="container">
            <div class="section-wrap bg-primary bg-opacity-10 rounded-4">
                <div class="section-content bg-pattern-dot-sm p-4 p-sm-6">
                    <div class="row justify-content-center text-center">
                        <div class="col-xl-8 col-xxl-9">
                            <div class="block-text">
                                <h6 class="overline-title text-primary">Boost your writing productivity</h6>
                                <h2 class="title">End writer’s block today</h2>
                                <p class="lead mt-3">It’s like having access to a team of copywriting experts writing
                                    powerful copy for you in 1-click.</p>
                                <ul class="btn-list btn-list-inline">
                                    <li><a href="#" class="btn btn-lg btn-primary"><span>Choose Plan</span><em class="icon ni ni-arrow-long-right"></em></a></li>
                                </ul>
                                <ul class="list list-row gy-0 gx-3">
                                    <li><em class="icon ni ni-check-circle-fill text-success"></em><span>No credit card
                                            required</span></li>
                                    <li><em class="icon ni ni-check-circle-fill text-success"></em><span>Cancel
                                            anytime</span></li>
                                    <li><em class="icon ni ni-check-circle-fill text-success"></em><span>10+ tools to
                                            expolore</span></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div><!-- .section-content -->
            </div><!-- .section-wrap -->
        </div><!-- .container -->
    </section><!-- .section -->
</main>


<script>
    function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        const csrftoken = getCookie('csrftoken');

    // Initialize Stripe with your publishable key
    var stripe = Stripe('pk_test_51OKe5yHOGzXipbLiSQTs3ThedglvWvtCOUCDi3rtzwT8r2erizBHynvxXtVCYzLTCLBR23YEfE5JManFPxlFhHUa00FbQDaDIx');

   document.getElementById('choose-monthly').addEventListener('click', function (e) {
        e.preventDefault();
        this.setAttribute('disabled', 'disabled');
        document.getElementById('monthly-spinner').style.display = 'inline-block';
        createCheckoutSession('monthly');
    });

    document.getElementById('choose-yearly').addEventListener('click', function (e) {
        e.preventDefault();
        this.setAttribute('disabled', 'disabled');
        document.getElementById('yearly-spinner').style.display = 'inline-block';
        createCheckoutSession('yearly');
    });


    function createCheckoutSession(planType) {
        fetch('/payments/create_checkout/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': csrftoken 
            },
            body: JSON.stringify({
                plan_type: planType
            })
        })
            .then(function (response) {
                if (response.status === 403) {
                    window.location.href = '/accounts/signup/';  // Redirect to sign-up
                    return null;
                }
                else {
                    return response.json();
                }
                // return response.json();
            })
            .then(function (session) {
                return stripe.redirectToCheckout({ sessionId: session.id });
            })
            .catch(function (error) {
                console.error('Error:', error);
            }).finally(function () {
                // Re-enable the button and hide the spinner
                var buttonId = planType === 'monthly' ? 'choose-monthly' : 'choose-yearly';
                var spinnerId = planType === 'monthly' ? 'monthly-spinner' : 'yearly-spinner';
                document.getElementById(buttonId).removeAttribute('disabled');
                document.getElementById(spinnerId).style.display = 'none';
            });;
    }
</script>

{% endblock %}