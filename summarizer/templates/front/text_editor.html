<style>
  .mycontainer {
    position: relative;
    display:flex;
    flex-direction: column;
    margin: 0 auto;
    max-width: 1100px;
    overflow: hidden;
    border-radius: 12px;
    user-select: none;
    border:1px solid rgba(0,0,0,.06);
    box-shadow: 0px 2px 40px rgba(0, 0, 0, 0.12);
  }

  .scrollable-header {
    overflow-x:auto;
    background-color: white;
    /* box-shadow: 0px 3px 25px 1px rgba(0,0,0,1)!important; */
   
  }

  .scrollable-header::-webkit-scrollbar {
    display: none;
  }

  .editor-header {

    height: 55px;
    border-bottom: 1px solid #dedede;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    padding: 8px 10px;

    padding-left: 15px!important;
   
    min-width: max-content;
  }
  .editor-header .head-parent{
    display: flex;
   align-items: center;
  }
  .editor-header .header-btns div{
    display: flex;
    align-items: center;
    
  }
  .editor-header .header-btns{
   
    font-size: 14px;
    display: flex;
    align-items: flex-end;
    justify-content: center;
   
  }
  #summary-length-container{
    font-size: 13px;
    color:#949494;
  }
  #sample-text{
    display: flex;
    align-items: center;
    justify-content: flex-end;
    margin-left:auto;
    
    color:#1e1e31;
    font-weight: 300;
    border:1px solid #ffffff;
    padding:2px 13px;
    /* text-decoration: underline; */
    border-radius: 100px;
    background:#f3f4f6;
    
    cursor: pointer;
    font-size:14px;
    font-weight: 400;
  }
  #sample-text svg{
    width:20px;
    margin-right: 5px;
  }
  #sample-text:hover{
    border-color: #3f3eed;
  }
  .word-count {
    background-color: white;
    margin: 0px 5px;
  }

  #word-count-summary-holder {
    width: 49%;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    position: absolute;
    right: 5px;
  }

  .mode-container {
    background-color: #f1f0fe;
    border: 1px solid #dedede;
    border-radius: 50px;
   
  }

  .mode-button {
    height: 100%;
    background: none;
    border: none;
    border-radius: 50px;
    padding: 4px 8px;
    transition: all 0.5s ease;
    font-size:13px;
  }


  .mode-button:hover {
    background-color: #00000017;
    transition: all 0.5s ease;
  }

  .mode-button[selected] {
    background-color: #3f3eed;
    color: white;
  }

  .editor-footer {
    height: 60px;
    
    border-top: 1px solid #dedede;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 2px 10px;
    background-color: white;
  }

  .editor-footer > div {
    width: 50%;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .editor-container {
    display:grid;
    grid-template-columns: 1fr 1fr;
    flex:1;
    min-height: 400px;
    max-height: 400px;
    /* height: calc(100% - 120px); */
  }
  @media(max-width:768px){
    .neighbourPanel{
      overflow-y: scroll;
    }
    .editor-container{
      grid-template-columns: 1fr!important;
      grid-template-rows: 1fr 1fr;
    }
    .editor-footer{
      overflow-x:scroll!important;
      height: 68px;
    }
    #paste-text{
      margin:auto!important;
    }
  }
  .neighbourPanel {
    width: 100%;
    height: 100%;
    padding: 30px;
    box-sizing: border-box;
    background-color: white;
  }

  .resizablePanel {
    position: relative;
   
    height: 100%;
    padding: 30px;
    flex-grow: 1;
    box-sizing: border-box;
    background-color: #f1f0fe;
    border-left:1px solid #ededed;
  }

  .resizablePanel:before {
    position: absolute;
    content: "";
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    cursor: ew-resize;
  }

  .scrollable {
    overflow-y: auto;
    /* Enable vertical scrolling */
    height: 100%;
    /* Ensure the inner container takes full height for scrolling */
  }

  .summorg-input-holder {
    height: 100%;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    
  }

  .summorg-input {
    text-align: center;
    /* background: linear-gradient(180deg, #eafaf6 0%, #7dffe7 90%); */
  

    /* width: 300px; */
   
    border-radius: 20px;
    cursor: text;
    min-width: 220px;
  }

  .summorg-input > div {
    border-radius: 10px;
    width: 100%;
    background-color: white;
    display: flex;
    box-shadow: var(--box-shadow-upward);
    position: relative;
  }

  .overlay {
    cursor: pointer;
    width: 100%;
    transition: all 0.5s ease;
    padding: 10px 0px;
  }

  .overlay p {
    margin: 0px;
  }

  .overlay:hover {
    background-color: #eefefa;
    transition: all 0.5s ease;
  }

  .overlay * {
    transition: all 0.5s ease;
  }

  .summary-slider {
    -webkit-appearance: none;
    appearance: none;
    width: 100px;
    height: 5px;
    border-radius: 5px;
    background: #d3d3d3;
    outline: none;
    opacity: 0.7;
    transition: all 0.5s ease;
  }

  .summary-slider::-webkit-slider-track-piece {
    background-color: red;
  }

  .summary-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: white;
    border: 2px solid #3f3eed;
    cursor: pointer;
  }

  .summary-slider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: white;
    border: 2px solid #3f3eed;
    cursor: pointer;
  }

  .mobile-only {
    display: none;
  }

  @media only screen and (max-width: 992px) {
    .editor-container {
      flex-direction: column;
    }

    .resizablePanel::after {
      display: none;
    }

    .resizablePanel {
      width: 100% !important;
      border: none;
      border-top: 4px solid #ccc;
    }

    .mobile-hidden {
      display: none !important;
    }

    .mobile-only {
      display: block !important;
    }

    .neighbourPanel {
      width: 100% !important;
    }

    .editor-footer > div {
      width: 100%;
    }

    #word-count-summary-holder {
      width: 170px;
    }
  }


  #summaryButton{
    padding:6px 2wpx!important;
    font-size: 16px;
    /* background-color: #292962; */
    
    border:none!important;
    margin-left: 4px;
   background-color: #3f3eed!important;
    border-radius: 4px;
    border-radius: 200px;
  }
  #summaryButton:hover{
    background-color: #3f3eed;
  }

  #paste-text{
    max-width: 100px;
    color:#41414e;
    font-weight: 600;
    border:1px solid #ebebeb;
    /* background-color: #f0f9f8; */
    
   
    border-radius: 10px;
    /* font-weight: bold; */
    transition: .3s ease;
    font-size: 12px;
  }
  #paste-text svg{
    margin-bottom: 4px;
    width:20px;
  }
  #paste-text:hover{
    border-color:#3f3eed;
<<<<<<< HEAD

    background-color: #e8e8fd;
=======
    /* transform:scale(1.02);
    background-color: #fff; */
>>>>>>> a1acaf5007650f496ccd983e425023c06700c0f0
  }
  
</style>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
  integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>
<script>
  function setMode(event) {
    var mode = event.target.getAttribute("mode");
    let lengthSlider = document.getElementById("summary-length-container");
    document.querySelectorAll(".mode-button").forEach((el) => {
      if (mode === el.getAttribute("mode")) {
        el.setAttribute("selected", true);
      } else {
        el.removeAttribute("selected");
      }
    });
    if (mode === "paragraph") {
      lengthSlider.style.display = "flex";
    } else {
      lengthSlider.style.display = "none";
    }
    console.log("mode:", mode);
  }

  function getEditorMode() {
    return document
      .querySelector(".editor-button[selected]")
      .getAttribute("mode");
  }



  function updateWordCount(event, id) {
    const wordCountElements = document.querySelectorAll("#" + id);
    const words = event.target.innerText
      .trim()
      .split(/\s+/)
      .filter((w) => w);
    wordCountElements.forEach((el) => {
      el.innerText = `Words: ${words.length}`;
    });
  }

  function removeInputHolder() {
    const inputHolder = document.querySelector(".summorg-input-holder");
    if (inputHolder) {
      inputHolder.remove();
    }
  }

  function resetEditors() {
    const neighbourPanel = document.querySelector(".neighbourPanel");

    neighbourPanel.innerHTML = ``;

    updateWordCount({ target: neighbourPanel }, "word-count-neighbour");
  }

  function getSummaryLength() {
    return document.getElementById("summary-length").value;
  }

  function copySummary(event) {
    const tooltip = event.target;
    const text = document.querySelector(".resizablePanel").innerText;
    if (!text) {
      $("#copyButton")
        .attr("data-bs-original-title", "Nothing to copy!")
        .tooltip("show");
    } else {
      navigator.clipboard.writeText(text);
      $("#copyButton")
        .attr("data-bs-original-title", "Copied!")
        .tooltip("show");
    }
    setTimeout(() => {
      $("#copyButton")
        .attr("data-bs-original-title", "Copy Summary!")
        .tooltip("hide");
    }, 1000);
  }

  function downloadSummary() {
    var text = document.querySelector(".resizablePanel").innerHTML;
    if (!text) {
      return;
    }
    var preHtml =
      "<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>Export HTML To Doc</title></head><body>";
    var postHtml = "</body></html>";
    text = preHtml + text + postHtml;
    const blob = new Blob(["\ufeff", text], {
      type: "application/msword",
    });
    const url = URL.createObjectURL(blob);
    const link = document.createElement("a");
    link.href = url;
    link.download = "summary.doc";
    link.click();
    URL.revokeObjectURL(url);
    link.remove();
  }
</script>
{% load static %}
<div class="mycontainer">
  <div class="scrollable-header">
    <div class="editor-header">
      <div class="head-parent" style="display: flex; min-width: 100%;">
        
        <div class="header-btns">
        <div style="display: flex; align-items: center;">
          <div class="mode-container">
            <button
              selected
              mode="paragraph"
              class="mode-button"
              onclick="setMode(event)"
            >
              Paragraph
            </button>
            <button
              mode="bullet-points"
              class="mode-button"
              onclick="setMode(event)"
            >
              Bullet Points
            </button>
          </div>
        </div>
        <div
          style="display: flex; align-items: center; margin-left: 30px"
          id="summary-length-container"
        >
          <span style="margin-right: 5px">Short</span>
          <input
            type="range"
            min="1"
            max="5"
            class="summary-slider"
            id="summary-length"
          />
          <span style="margin-left: 5px">Long</span>
        </div>
        </div>
        <div class="" id="sample-text">
          <svg width="30" height="32" viewBox="0 0 30 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5.5161 6.91317C4.02827 6.91433 3.2484 6.93324 2.64389 7.24125C2.07738 7.52989 1.61679 7.99048 1.32815 8.557C1 9.20103 1 10.0441 1 11.7303V26.1819C1 27.8681 1 28.7112 1.32815 29.3552C1.61679 29.9217 2.07738 30.3824 2.64389 30.6709C3.28792 30.9991 4.131 30.9991 5.81717 30.9991H17.258C18.9441 30.9991 19.7873 30.9991 20.4313 30.6709C20.9977 30.3824 21.4584 29.9217 21.747 29.3552C22.0751 28.7112 22.0751 27.8681 22.0751 26.1819V11.7303C22.0751 10.0441 22.0751 9.20103 21.747 8.557C21.4584 7.99048 20.9977 7.52989 20.4313 7.24125C19.8267 6.93324 19.0469 6.91433 17.559 6.91317M5.5161 6.91317V9.92385H17.559V6.91317M5.5161 6.91317V6.47219C5.5161 5.79061 5.78686 5.13696 6.26878 4.65503C6.75071 4.1731 7.40436 3.90234 8.08593 3.90234H14.9892C15.6707 3.90234 16.3245 4.1731 16.8064 4.65503C17.2882 5.13696 17.559 5.79061 17.559 6.47219V6.91317M11.5376 15.9454H7.02147M16.0537 21.9669H7.02147" stroke="#1e1e31" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M22.2891 4.22581H28.7407M25.5149 1V7.45161" stroke="#1e1e31" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            
          <p>Sample Text</p>
        </div>
      </div>
    </div>
  </div>
  <div class="editor-container">
    <div
      class="neighbourPanel scrollable"
      oninput="updateWordCount(event, 'word-count-neighbour')"
      contenteditable="true"
    >
      <div class="summorg-input-holder">
        <div class="summorg-input">
          <div class="gradient-hover-effect active">
            <!-- <div class="overlay" id="sample-text">
              <svg width="30" height="32" viewBox="0 0 30 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5.5161 6.91317C4.02827 6.91433 3.2484 6.93324 2.64389 7.24125C2.07738 7.52989 1.61679 7.99048 1.32815 8.557C1 9.20103 1 10.0441 1 11.7303V26.1819C1 27.8681 1 28.7112 1.32815 29.3552C1.61679 29.9217 2.07738 30.3824 2.64389 30.6709C3.28792 30.9991 4.131 30.9991 5.81717 30.9991H17.258C18.9441 30.9991 19.7873 30.9991 20.4313 30.6709C20.9977 30.3824 21.4584 29.9217 21.747 29.3552C22.0751 28.7112 22.0751 27.8681 22.0751 26.1819V11.7303C22.0751 10.0441 22.0751 9.20103 21.747 8.557C21.4584 7.99048 20.9977 7.52989 20.4313 7.24125C19.8267 6.93324 19.0469 6.91433 17.559 6.91317M5.5161 6.91317V9.92385H17.559V6.91317M5.5161 6.91317V6.47219C5.5161 5.79061 5.78686 5.13696 6.26878 4.65503C6.75071 4.1731 7.40436 3.90234 8.08593 3.90234H14.9892C15.6707 3.90234 16.3245 4.1731 16.8064 4.65503C17.2882 5.13696 17.559 5.79061 17.559 6.47219V6.91317M11.5376 15.9454H7.02147M16.0537 21.9669H7.02147" stroke="#7F7F7F" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M22.2891 4.22581H28.7407M25.5149 1V7.45161" stroke="#7F7F7F" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                
              <p>Sample Text</p>
            </div> -->
            <div class="overlay" id="paste-text">
              <svg width="27" height="32" viewBox="0 0 27 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19.214 11.7148V18.1434H25.6426L19.214 11.7148ZM19.214 11.7148H10.6426V31.0006H25.6426V18.1434" stroke="#3f3eed" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M15.9992 5.28571H7.42773V3.14286C7.42773 1.96429 8.39202 1 9.57059 1H13.8563C15.0349 1 15.9992 1.96429 15.9992 3.14286V5.28571Z" stroke="#3f3eed" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M10.6429 28.8588H5.28571C2.92857 28.8588 1 26.9302 1 24.5731V7.43025C1 5.0731 2.92857 3.14453 5.28571 3.14453H7.42857" stroke="#3f3eed" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M16 3.14453H18.1429C20.5 3.14453 22.4286 5.0731 22.4286 7.43025V14.9302" stroke="#3f3eed" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                
              <p>Paste Text</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div
      id="markdown-content"
      class="resizablePanel scrollable"
      oninput="updateWordCount(event, 'word-count-summary')"
      contenteditable="true"
    ></div>
  </div>
  <div class="editor-footer">
    <div>
      
      <div id="word-count-summary-holder" class="mobile-hidden">
        <div style="display: flex; align-items: center">
          <button
            class="round-button"
            id="copyButton"
            data-toggle="tooltip"
            data-placement="top"
            title="Copy Summary"
            onclick="copySummary(event)"
          >
            <em class="fa-regular fa-copy" style="pointer-events: none"></em>
          </button>
          <button
            class="round-button"
            data-toggle="tooltip"
            data-placement="top"
            title="Download"
            onclick="downloadSummary()"
          >
            <em class="fa-solid fa-download"></em>
          </button>
          <p class="word-count" id="word-count-summary">Words: 0</p>
        </div>
      </div>
      
      <div style="display: flex; align-items: center">
        {% include 'front/upload_button.html' %}
        <button
          class="round-button"
          data-toggle="tooltip"
          data-placement="top"
          title="Clear"
          onclick="resetEditors()"
        >
          <em class="fa-regular fa-trash-can"></em>
        </button>
        <p class="word-count mobile-hidden" id="word-count-neighbour">
          Words: 0
        </p>
        <button
          class="round-button mobile-only"
          id="copyButton"
          data-toggle="tooltip"
          data-placement="top"
          title="Copy Summary"
          onclick="copySummary(event)"
        >
          <em class="fa-regular fa-copy" style="pointer-events: none"></em>
        </button>
        <button
          class="round-button mobile-only"
          data-toggle="tooltip"
          data-placement="top"
          title="Download"
          onclick="downloadSummary()"
        >
          <em class="fa-solid fa-download"></em>
        </button>
        <p class="word-count mobile-only" id="word-count-summary">Words: 0</p>
      </div>
      <div>
        <button class="btn btn-lg btn-primary" id="summaryButton">
          Summarize
          <span
            id="summary-spinner"
            class="spinner-border spinner-border-sm"
            role="status"
            aria-hidden="true"
            style="display: none; margin-left: 10px"
          ></span>
        </button>
      </div>
      <!-- <div>
        <button class="btn btn-lg btn-primary" id="summaryButton">
          Summarize
          <span
            id="summary-spinner"
            class="spinner-border spinner-border-sm"
            role="status"
            aria-hidden="true"
            style="display: none; margin-left: 10px"
          ></span>
        </button>
      </div> -->
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const neighbourPanel = document.querySelector(".neighbourPanel");
    const sampleText = document.getElementById("sample-text");
    const pasteText = document.getElementById("paste-text");

    neighbourPanel.addEventListener("click", function (event) {
      if (
        event.target.id !== "paste-text" &&
        event.target.id !== "sample-text"
      ) {
        removeInputHolder();
      }
    });

    pasteText.addEventListener("click", function () {
      navigator.clipboard
        .readText()
        .then((text) => {
          neighbourPanel.innerHTML = text;
          updateWordCount({ target: neighbourPanel }, "word-count-neighbour");
        })
        .catch((err) => {
          console.error("Failed to read clipboard contents: ", err);
        });
    });

    sampleText.addEventListener("click", function () {
      neighbourPanel.textContent =
        "Fantasy Football is a game played by millions of football fans around the world. It’s a game of skill, strategy and luck that’s become increasingly popular over the years. In fantasy football, you create a team of real-life NFL players and compete against other teams in your league. Your team earns points based on the performance of your players in real-life NFL games. The team with the most points at the end of the fantasy football season wins the league. For those new to the game, fantasy football can seem a bit daunting. Before you begin playing, it’s important to understand the basics of the game. You need to know how to draft your players, how to manage your team, and what strategies you can use to improve your team’s chances of success. The first step of playing fantasy football is to join a league. You can join a public league or create a private one with your friends and family. Once you’ve joined your league, it’s time to draft your team. You’ll select players from the NFL player pool and allocate them to your team. Different leagues have different rules for drafting, so make sure to read the rules of your league carefully before you start drafting. Once you’ve drafted your team, it’s time to manage it. You’ll need to set your lineup each week, making sure to choose the players that have the best chance of scoring the most points. You’ll also need to monitor the performance of your players, dropping those that are underperforming and picking up new ones to replace them.";
      updateWordCount({ target: neighbourPanel }, "word-count-neighbour");
    });
  });
</script>
<script>
  let sample_text = document.getElementById("sample-text");
  sample_text.addEventListener("click", function () {
    sample_text.style.display = "none";
  });
</script>
<script>
  const resizablePanel = document.querySelector(".resizablePanel");
  const neighbourPanel = document.querySelector(".neighbourPanel");

  const BORDER_SIZE = 4;

  let m_pos;

  function resize(e) {
    const dx = m_pos - e.x;
    m_pos = e.x;
    resizablePanel.style.width =
      parseInt(getComputedStyle(resizablePanel, "").width) + dx + "px";
    neighbourPanel.style.width =
      parseInt(getComputedStyle(neighbourPanel, "").width) - dx + "px";
  }

  resizablePanel.addEventListener(
    "mousedown",
    function (e) {
      if (e.offsetX < BORDER_SIZE) {
        m_pos = e.x;
        document.addEventListener("mousemove", resize, false);
      }
    },
    false
  );

  document.addEventListener(
    "mouseup",
    function () {
      document.removeEventListener("mousemove", resize, false);
    },
    false
  );
</script>
